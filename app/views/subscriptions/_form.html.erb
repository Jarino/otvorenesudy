<%= form_for subscription, method: subscription.new_record? ? :post : :put, html: { id: "subscribe-form-#{subscription.id || :new}" } do |f| %>
  <%= f.fields_for :query do |q| %>
    <%= q.hidden_field :model, value: model.to_s %>
    <%= q.hidden_field :value, value: query.to_json %>
  <% end %>

  <% Period.values.each do |_, period| %>
    <label class="radio inline">
      <%= f.radio_button :period_id, period.id, checked: subscription.period_id == period.id %>
      <%= t "period.#{period.name}" %>
    </label>
  <% end %>
<% end %>
