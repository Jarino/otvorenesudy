<% provide :title, @court.name %>

<section id="court-profile" class="profile">
  <div class="page-header">
    <h1>
      <%= yield :title %>
      <br/>
      <small><%= @court.address %></small>
    </h1>
  </div>

  <div class="row">
    <div class="span12">
      <p>
        <span class="gutter centered muted"><%= icon_tag :user %></span>
        Na súde <%= @judges.any? ? 'pracuje' : 'nepracujú' %>
        <%= number_with_translation(@judges.count, key: :judge) %>.
        Pre súd <%= 'zatiaľ ne' if @court.hearings.none? %>evidujeme
        <%= number_with_translation(@court.hearings.count, key: :hearing) %>
        a&nbsp;<%= number_with_translation(@court.decrees.count, key: :decree) %>.
      </p>
      <% if @expenses.any? %>
        <p>
          <span class="gutter centered muted"><%= icon_tag :money %></span>
          Výdavky súdu na nálezy Ústavného súdu Slovenskej republiky za roky
          <%= @expenses.first.year %> &ndash; <%= @expenses.last.year %>
          boli <%= number_to_currency(@court.expenses_total, precision: 0) %>.
          <% unless @court.expenses_total.zero? %>
            <ul>
              <% @expenses.reverse.reject { |expense| expense.value.zero? }.each do |expense| %>
                <li>Za rok <%= expense.year %> &ndash; <%= number_to_currency expense.value, precision: 0 %></li>
              <% end %>
            </ul>
          <% end %>
        </p>
      <% end %>
    </div>
  </div>
</section>

<section id="court-tabs">
  <div class="row">
    <div class="span12">
      <div class="tabbable">

        <ul class="nav nav-tabs">
          <li class="active">
            <a href="#contact" data-toggle="tab">Kontakt</a>
          </li>
          <li><a href="#offices" data-toggle="tab">Pracoviská</a></li>
          <li><%= tab_link_to_with_count 'Sudcovia', "#judges", @court.judges.count%></li>
          <li><%= tab_link_to_with_count 'Rozhodnutia', '#decrees', @court.decrees.count %></li>
          <li><%= tab_link_to_with_count 'Budúce pojednávania', '#upcoming-hearings', @court.hearings.upcoming.count %></li>
          <li><%= tab_link_to_with_count 'Minulé pojednávania', '#past-hearings', @court.hearings.past.count %></li>
          <li><%= link_to "V médiach", "#in-media", :'data-toggle' => :tab %></li>
        </ul>

        <div class="tab-content">
          <div id="contact" class="tab-pane active">
            <%= render 'contact' %>
          </div>

          <div id="offices" class="tab-pane">
            <%= render 'offices' %>
          </div>

          <div id="judges" class="tab-pane">
            <%= render 'judges', judges: @judges %>
          </div>

          <div id="decrees" class="tab-pane">
            <%= render 'decrees', decrees: @decrees, query: { court: @court.name } %>
          </div>

          <div id="upcoming-hearings" class="tab-pane">
            <%= render 'hearings', hearings: @upcoming_hearings, query: { court: @court.name } %>
          </div>

          <div id="past-hearings" class="tab-pane">
            <%= render 'hearings', hearings: @past_hearings, query: { court: @court.name, historical: 'true' } %>
          </div>

          <div id="in-media" class="tab-pane">
            <%= render 'shared/context_search' %>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<section id="context-search">
</section>

<section id="court-resource">
  <div class="row">
    <div class="span12">
      <small class="muted">
        Informácie o súde boli získané z <%= external_link_to 'dokumentu', @court.uri, class: :muted %>,
        ktorého posledná aktualizácia bola vykonaná <%= time_tag @court.updated_at.to_date, format: :default %>.
      </small>
    </div>
  </div>
</section>
